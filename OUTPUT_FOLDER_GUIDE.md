# 输出文件夹使用指南

## 默认输出行为

当您使用本工具处理数据和下载图片时，如果**未指定输出文件夹路径**，程序将自动使用以下默认行为：

### 默认输出位置

- **默认文件夹**: `output`（位于程序运行的当前目录下）
- **自动创建**: 如果 `output` 文件夹不存在，程序会自动创建
- **文件结构**: 下载的图片会按照 `company_id/account_id/user_id` 的层级结构组织

### 示例

假设您的项目目录结构如下：

```
/Users/username/Documents/project/
├── main.py
├── app/
├── data.xlsx
└── ...
```

运行程序后，输出结构将是：

```
/Users/username/Documents/project/
├── main.py
├── app/
├── data.xlsx
├── output/                          ← 自动创建的默认输出文件夹
│   ├── data_updated.xlsx           ← 更新后的数据文件
│   ├── 16636453665062/             ← company_id
│   │   ├── 27052906237672/         ← account_id
│   │   │   ├── 17440738577022/     ← user_id
│   │   │   │   ├── 09_28_10-12-06_amazon.com_商品图片.jpg
│   │   │   │   └── ...
│   │   │   └── ...
│   │   └── ...
│   └── ...
└── ...
```

## 自定义输出位置

如果您想使用自定义的输出位置，有以下几种方式：

### 方法 1: 通过简单模式设置

1. 运行程序：`python main.py`
2. 选择"简单模式"
3. 进入"设置配置"菜单
4. 选择"设置输出文件夹"
5. 输入您想要的输出路径

### 方法 2: 修改配置文件

编辑 `app/config.py` 文件：

```python
# 默认输出文件夹（当未指定输出路径时使用）
DEFAULT_OUTPUT_FOLDER = "output"  # 修改为您想要的路径
```

例如：
```python
DEFAULT_OUTPUT_FOLDER = "/Users/username/Downloads/images"
```

### 方法 3: 在简单模式中临时指定

在简单模式的用户设置中，默认输出文件夹设置为 `./output`。您可以通过设置菜单修改这个值，修改后会保存到用户配置文件中。

## 输出文件说明

### 更新后的数据文件

- **文件名格式**: `原文件名_updated.xlsx` 或 `原文件名_filtered.xlsx`
- **位置**: 输出文件夹根目录
- **内容**: 包含原始数据 + 新增的 `file_name` 列（记录下载的图片文件名）

### 图片文件

- **文件名格式**: `时间戳_URL信息_标题.扩展名`
  - 例如: `09_28_10-12-06_sellercentral.amazon.com_home_亚马逊.jpg`
- **位置**: `输出文件夹/company_id/account_id/user_id/`
- **组织方式**: 按照公司ID、账户ID、用户ID三级目录结构组织

## 常见问题

### Q: 如果输出文件夹已存在会怎样？

A: 程序会继续使用该文件夹，不会删除已有内容。如果存在同名文件，程序会跳过下载。

### Q: 可以使用绝对路径吗？

A: 可以。您可以指定任何有效的绝对路径或相对路径。

### Q: 输出文件夹会自动创建吗？

A: 是的。程序会自动创建所需的所有目录，包括多级子目录。

### Q: 如何查看当前的输出设置？

A: 在简单模式中，选择"查看当前设置"即可看到当前的输出文件夹配置。

### Q: 批量处理时输出位置在哪里？

A: 批量处理使用相同的输出文件夹设置。所有处理的文件的输出都会保存在同一个输出文件夹下。

## 最佳实践

1. **使用默认设置**: 对于大多数用户，使用默认的 `output` 文件夹即可
2. **定期清理**: 定期检查并清理 `output` 文件夹中的旧文件
3. **备份重要数据**: 在处理大量数据前，建议先备份原始文件
4. **使用有意义的路径**: 如果自定义输出路径，使用清晰、有意义的路径名
5. **避免特殊字符**: 输出路径中避免使用特殊字符，以确保跨平台兼容性

## 权限问题

如果遇到权限错误：

1. 确保您对输出目录有写入权限
2. 在 macOS/Linux 上，避免使用需要 sudo 权限的系统目录
3. 在 Windows 上，避免使用受保护的系统文件夹（如 C:\Windows）

## 配置优先级

程序按以下优先级确定输出位置：

1. **用户在简单模式中设置的输出文件夹**（最高优先级）
2. **配置文件中的 DEFAULT_OUTPUT_FOLDER**
3. **硬编码的默认值** `output`（最低优先级）

## 测试默认行为

运行测试脚本验证默认输出行为：

```bash
python test_default_output.py
```

这将验证：
- 配置文件中的默认值设置
- 处理器的默认行为
- 输出文件夹自动创建功能

